<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Layout Fix</title>
    <style>
        body {
            margin: 0;
            background-color: #050505;
            /* НЕОНОВЫЙ ФОН */
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(60, 20, 120, 0.4) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(0, 200, 150, 0.2) 0%, transparent 40%);
            background-attachment: fixed;
            color: white;
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            height: 200vh; 
            overflow-x: hidden;
        }
        
        /* ШУМ */
        body::after {
            content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
            pointer-events: none; z-index: 0; opacity: 0.07;
        }

        /* --- 3D CONTAINER --- */
        #model-wrapper {
            position: fixed;
            transform: translate(-50%, -50%); 
            z-index: 10;
            pointer-events: auto; 
            /* top, left, width, height теперь управляются через JS */
        }

        model-viewer {
            width: 100%; height: 100%;
            background-color: transparent; outline: none;
        }

        /* --- TEXT SECTIONS --- */
        .section {
            height: 100vh;
            position: relative;
            z-index: 5;
            display: flex;
            align-items: center; /* По умолчанию центр (для десктопа) */
            padding-left: 10%;
            box-sizing: border-box;
            pointer-events: none;
        }
        
        .text-content {
            max-width: 450px;
            pointer-events: auto;
            text-shadow: 0 2px 10px rgba(0,0,0,0.8); /* Тень посильнее для контраста */
        }

        h1 { margin: 0 0 20px 0; font-size: 4rem; line-height: 0.95; font-weight: 800; letter-spacing: -2px; }
        p { font-size: 1.3rem; line-height: 1.6; color: #e0e0e0; margin: 0; }
        strong { color: white; font-weight: 600; }
        .divider { width: 50px; height: 4px; background: #ff0055; margin-bottom: 30px; }

        /* --- МОБИЛЬНАЯ АДАПТАЦИЯ (CSS) --- */
        @media (max-width: 768px) {
            .section {
                padding-left: 0;
                justify-content: center;
                text-align: center;
                padding: 20px;
                
                /* ВАЖНО: Прижимаем текст к низу экрана */
                align-items: flex-end; 
                padding-bottom: 15vh; /* Отступ от нижнего края */
            }
            
            h1 { font-size: 3rem; }
            p { font-size: 1.1rem; }
            .divider { margin: 0 auto 20px auto; }
            
            /* Подложка под текст на мобилке (опционально, для читаемости) */
            .text-content {
                /* background: linear-gradient(to top, rgba(0,0,0,0.8), transparent); */
            }
        }
    </style>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>
</head>
<body>

    <div id="model-wrapper">
        <model-viewer 
            src="model.glb" 
            alt="3D Interactive Model" 
            camera-controls 
            shadow-intensity="1" 
            exposure="1"
            disable-zoom 
            disable-tap 
            interaction-prompt="none" 
            field-of-view="25deg"
            min-field-of-view="10deg"
            max-field-of-view="45deg">
        </model-viewer>
    </div>

    <section class="section">
        <div class="text-content">
            <div class="divider"></div>
            <h1>MOBILE<br>OPTIMIZED</h1>
            <p>
                1. <strong>CLICK</strong> to animate.<br>
                2. <strong>SCROLL</strong> to zoom in.
            </p>
        </div>
    </section>

    <section class="section">
        </section>

    <script>
        const wrapper = document.getElementById('model-wrapper');
        const viewer = document.querySelector('model-viewer');
        
        // Добавляем переменные для вертикали (startTop, endTop)
        let startLeft, endLeft, startTop, endTop, startWidth, endWidth, startHeight, endHeight;

        function setResponsiveConfig() {
            const isMobile = window.innerWidth < 768;

            if (isMobile) {
                // --- МОБИЛЬНЫЕ НАСТРОЙКИ ---
                
                // Позиция по вертикали (Top)
                startTop = 30;    // Модель сверху (30% от верха экрана)
                endTop = 50;      // Едет в центр (50%)
                
                // Позиция по горизонтали (Left)
                startLeft = 50;   // Центр
                endLeft = 50;     // Центр
                
                // Размеры
                startWidth = 90;  
                endWidth = 100;   
                startHeight = 50; // Занимает верхнюю половину
                endHeight = 100;  
            } else {
                // --- ДЕСКТОП НАСТРОЙКИ ---
                
                // Вертикаль всегда по центру
                startTop = 50;
                endTop = 50;
                
                // Горизонталь: Справа -> В центр
                startLeft = 75;   
                endLeft = 50;     
                
                // Размеры
                startWidth = 50;  
                endWidth = 100;   
                startHeight = 80; 
                endHeight = 100;  
            }
            updatePosition();
        }

        function updatePosition() {
            const scrolled = window.scrollY;
            const maxScroll = window.innerHeight; 
            let progress = scrolled / maxScroll;
            if (progress > 1) progress = 1;
            if (progress < 0) progress = 0;

            // Математика для всех параметров
            const currentLeft = startLeft + (endLeft - startLeft) * progress;
            const currentTop = startTop + (endTop - startTop) * progress; // Новая строка для Top
            const currentWidth = startWidth + (endWidth - startWidth) * progress;
            const currentHeight = startHeight + (endHeight - startHeight) * progress;

            wrapper.style.left = currentLeft + '%';
            wrapper.style.top = currentTop + '%'; // Применяем Top
            wrapper.style.width = currentWidth + 'vw';
            wrapper.style.height = currentHeight + 'vh';
        }

        setResponsiveConfig();
        window.addEventListener('scroll', updatePosition);
        window.addEventListener('resize', () => {
            setResponsiveConfig(); 
            updatePosition();      
        });

        viewer.addEventListener('load', () => { viewer.pause(); viewer.currentTime = 0; });
        viewer.addEventListener('click', () => {
            if (viewer.paused) viewer.play(); 
            else viewer.pause(); 
        });
    </script>
</body>
</html>
